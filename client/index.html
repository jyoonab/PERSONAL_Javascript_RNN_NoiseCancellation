<!DOCTYPE html>
<html>
    <head>
      <meta charset="UTF-8">

      <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

      <!-- For Rickshaw Graph -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.2.0/d3.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.6.5/rickshaw.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.6.3/rickshaw.min.css"/>

      <!--Add JS Files-->
      <script src="webRtc.js"></script>
      <script src="streamvisualizer.js"></script>
      <script src="psnrVisualizer.js"></script>
      <script src="rnnoise-runtime.js"></script>
      <script src="index.js" async></script>
      <script src="soundControler.js" async></script>
      <!--Add Stylesheet-->
      <link rel="stylesheet" href="index.css"/>

    </head>

    <body>
        <img src="webrtc.png">
        <h1>RNN Based Noise Reduction Test Page ver 1.0.0</h1>

        <h2>Device Settings</h2>
        <table>
            <tr>
                <td>Input</td>
                <td><select id="inputDevice"></select></td>
            </tr>
            <tr>
                <td>Output</td>
                <td><select id="outputDevice"></select></td>
            </tr>
            <tr>
                <td>Video</td>
                <td><select id="videoDevice"></select></td>
            </tr>
        </table>
        <br/><br/>

        <!-- Test Region Starts Here -->
        <div class="webRtcTestDiv">
            <!-- The Browser Blocks Video Play if Auauthorized Video is tried to be played automatically.
            Therefore, this button is workaround so user can play stream after clicking it -->
            <button id="hiddenButton">Please Click Here to Start WebRTC!</button>
            <div class="videoDiv">
              <video id="localVideo" playsinline autoplay></video>
              <video id="remoteVideo" playsinline autoplay></video>
            </div>
            <canvas id="localVoiceCanvas"></canvas>
            <canvas id="remoteVoiceCanvas"></canvas>
        </div>

        <div>
          <p>PSNR Meter</p>
          <div id="chart_container">
            <div id="y_axis"></div>
            <div id="demo_chart"></div>
          </div>
          <p id="rnnoiseSpeedMeter">RNNoise Speed : 0 ms</p>
        </div>

        <div class="buttonDiv">
          <ul>
            <li id="echoToggle" onclick="setButton('EchoToggle')">Echo Off</li>
            <li id="rnnoiseToggle" onclick="setButton('RNNoiseToggle')">RNNoise Off</li>
            <li id="webrtcToggle" onclick="setButton('WebRtcToggle')">WebRtc Off</li>
          </ul>
        </div>
    </body>
</html>
